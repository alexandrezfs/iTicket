<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:c="http://java.sun.com/jstl/core"
      xmlns:h="http://java.sun.com/jsf/html">
<h:head>
    <title>iTicket</title>

    <link rel="stylesheet" href="${ UiBean.contextPath }/assets/bower_components/font-awesome/css/font-awesome.min.css" />
    <link rel="stylesheet" href="${ UiBean.contextPath }/assets/bower_components/foundation/css/foundation.css" />
    <link rel="stylesheet" href="${ UiBean.contextPath }/assets/bower_components/fancybox/source/jquery.fancybox.css" />
    <link rel="stylesheet" href="${ UiBean.contextPath }/assets/bower_components/datetimepicker/jquery.datetimepicker.css" />
    <link rel="stylesheet" href="${ UiBean.contextPath }/assets/css/main.css" />

    <script src="${ UiBean.contextPath }/assets/bower_components/jquery/dist/jquery.min.js"></script>
    <script src="${ UiBean.contextPath }/assets/bower_components/modernizr/modernizr.js"></script>
    <script src="${ UiBean.contextPath }/assets/bower_components/foundation/js/foundation.min.js"></script>
    <script src="${ UiBean.contextPath }/assets/bower_components/shufflejs/dist/jquery.shuffle.min.js"></script>
    <script src="${ UiBean.contextPath }/assets/bower_components/fancybox/source/jquery.fancybox.pack.js"></script>
    <script src="${ UiBean.contextPath }/assets/bower_components/datetimepicker/jquery.datetimepicker.js"></script>
    <script src="${ UiBean.contextPath }/assets/js/main.js"></script>

    <link rel="shortcut icon" href="${ UiBean.contextPath }/assets/img/favicon.ico" />

</h:head>
<h:body>

    <nav class="top-bar" data-topbar="true">
        <ul class="title-area">

            <li class="name">
                <h1>
                    <a href="${ UiBean.contextPath }/index.xhtml">
                        <i class="fa fa-ticket"></i> iTicket
                    </a>
                </h1>
            </li>

            <li class="toggle-topbar menu-icon"><a href="#"><span>Menu</span></a></li>

        </ul>
        <section class="top-bar-section">

            <c:if test="#{ not empty UserSession }">

                <ul class="left">
                    <li class="divider"></li>
                    <li>
                        <a href="${ UiBean.contextPath }/secured/allTickets.xhtml"><i class="fa fa-list-ul"></i> All tickets</a>
                    </li>
                    <li class="divider"></li>
                    <li>
                        <a href="${ UiBean.contextPath }/secured/newTickets.xhtml"><i class="fa fa-refresh"></i> New tickets</a>
                    </li>
                    <li class="divider"></li>
                    <c:if test="#{ UserType == 'PRODUCT_OWNER' }">
                        <li>
                            <a href="${ UiBean.contextPath }/secured/myOwnedTickets.xhtml"> <i class="fa fa-bookmark"></i> My owned tickets</a>
                        </li>
                    </c:if>
                    <c:if test="#{ UserType == 'DEVELOPER' }">
                        <li>
                            <a href="${ UiBean.contextPath }/secured/myTicketsInProgress.xhtml"> <i class="fa fa-bookmark"></i> My tickets in progress</a>
                        </li>
                    </c:if>
                    <li class="divider"></li>
                    <c:if test="#{ UserType == 'PRODUCT_OWNER' }">
                        <li>
                            <a href="${ UiBean.contextPath }/secured/addTicket.xhtml"><i class="fa fa-plus-circle"></i> Add ticket</a>
                        </li>
                    </c:if>
                </ul>

            </c:if>

            <ul class="right">
                <c:choose>
                    <c:when test="#{ empty UserSession }">
                        <li class="divider"></li>
                        <li>
                            <a href="signin.xhtml"><i class="fa fa-sign-in"></i> Sign In</a>
                        </li>
                        <li class="divider"></li>
                        <li>
                            <a href="signup.xhtml"><i class="fa fa-user"></i> Sign Up</a>
                        </li>
                    </c:when>
                    <c:otherwise>
                        <li>
                            <a href="#">
                                <i class="fa fa-user"></i><h:outputText value=" ${ UserSession.firstName } ${ UserSession.lastName } [ ${ UserType } ]"/>
                            </a>
                        </li>
                        <li class="divider"></li>
                        <li>
                            <h:form>
                                <h:commandLink action="#{ UserController.logout }" styleClass="signOutBtn">
                                    Log out <i class="fa fa-sign-out"></i>
                                </h:commandLink>
                            </h:form>
                        </li>
                    </c:otherwise>
                </c:choose>
            </ul>
        </section>
    </nav>

    <ui:insert name="inBody" />

    <footer class="row">
        <div class="large-12 columns">
            <hr/>
            <div class="row">
                <div class="large-12 columns">
                    <p>Alexandre Nguyen - <a href="http://www.alexandrenguyen.fr">www.alexandrenguyen.fr</a> - Under <a href="http://opensource.org/licenses/MIT" target="_blank">MIT License</a>.</p>
                </div>
            </div>
        </div>
    </footer>
    <script>
        $(document).foundation();
    </script>

</h:body>
</html>